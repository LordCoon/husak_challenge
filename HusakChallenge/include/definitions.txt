defineStruct(ExportObjective, 106)
{
	defineStructVariable(ExportObjective, int, index);
	defineStructVariable(ExportObjective, string, name);
	defineStructVariable(ExportObjective, float, target);
	defineStructVariable(ExportObjective, string, uniqueName);
	defineStructVariable(ExportObjective, int, isDone);
}

defineArray(ExportObjective[40], _exportObjectives);
defineArray(int, _completeExportObjective);
defineArray(int, _wholeExportObjective);
defineArray(string, _wholeExportObjectiveName);
defineVariable(ExportObjective, _currentExportObjective);
defineVariable(long, _currentExportObjectiveCurrentValue);
defineVariable(StatRecord, _statRecord);


defineFunction(AddExportObjective, void, int: globalIndex int: index, string: name, float: target, string: uniqueName)
{
    _exportObjectives[globalIndex].index = index;
    _exportObjectives[globalIndex].name = name;
    _exportObjectives[globalIndex].target = target;
    _exportObjectives[globalIndex].uniqueName = uniqueName;
    _exportObjectives[globalIndex].isDone = 0;

    _currentExportObjective = _exportObjectives[globalIndex];

    Objective_AddRequirement(_currentExportObjective.name, _currentExportObjective.target, "resources/" + _currentExportObjective.uniqueName + ".png");

    returnVoid();
}

defineFunction(UpdateExportObjectiveAll, void)
{
	_statRecord.GetFromPresentToDate_DMY(1,1,1960);
    _wholeExportObjectiveName = "none";
    _wholeExportObjective = 1;
    _completeExportObjective = 0;
    for (i = 0, i < 40, i = i + 1)
    {
        UpdateExportObjective(i);
    }

    if(_completeExportObjective ? 6)
    {
        Window_ShowText("You win");
        Script_Sleep(20.0);
	    Objectives_ClearAll();
    }

    returnVoid();
}

defineFunction(UpdateExportObjective, void, int: globalIndex)
{
    _currentExportObjective = _exportObjectives[globalIndex];

    _currentExportObjectiveCurrentValue = _statRecord.ExportTonsRUB[_currentExportObjective.uniqueName] + _statRecord.ExportTonsUSD[_currentExportObjective.uniqueName];

    if(_currentExportObjective.target > _currentExportObjectiveCurrentValue)
    {
        Objective_UpdateRequirementToTarget(_currentExportObjective.name, _currentExportObjective.index);
    }
    else()
    {
        Objective_UpdateRequirement(_currentExportObjective.name, _currentExportObjective.index, _currentExportObjectiveCurrentValue);
        _currentExportObjective.isDone = 1;
        _exportObjectives[globalIndex].isDone = 1;
    }

    if(!(_wholeExportObjectiveName ? _currentExportObjective.name))
    {
        if(_wholeExportObjective ? 1)
        {
            Objective_SetComplete(_currentExportObjective.name);
            _completeExportObjective = _completeExportObjective + 1;
        }

        _wholeExportObjectiveName = _currentExportObjective.name;
        _wholeExportObjective = _currentExportObjective.isDone;
    }
    else()
    {
        if(!(_wholeExportObjective ? 1) | !(_currentExportObjective.isDone ? 1))
        {
            _wholeExportObjective = 0;
        }
    }

    returnVoid();
}

defineFunction(InitScriptConstants, void)
{
    returnVoid();
}